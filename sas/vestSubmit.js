var VestWeb = function () {
    return new _vestWeb();
};

var Q1yy = function () {

    this.n0 = function () {
        return typeof this.B0.M === 'function' ? this.B0.M.apply(this.B0, arguments) : this.B0.M;
    }
    this.n0 = function () {
        return typeof this.B0.M === 'function' ? this.B0.M.apply(this.B0, arguments) : this.B0.M;
    };
    this.f3 = function () {
        return typeof this.n3.M === 'function' ? this.n3.M.apply(this.n3, arguments) : this.n3.M;
    };
    this.P3 = function () {
        return typeof this.n3.M === 'function' ? this.n3.M.apply(this.n3, arguments) : this.n3.M;
    };
    this.f0 = function () {
        return typeof this.B0.M === 'function' ? this.B0.M.apply(this.B0, arguments) : this.B0.M;
    };
    this.V3 = function () {
        return typeof this.g4.M === 'function' ? this.g4.M.apply(this.g4, arguments) : this.g4.M;
    };
    this.i3 = function () {
        return typeof this.g4.C === 'function' ? this.g4.C.apply(this.g4, arguments) : this.g4.C;
    };
    this.n3 = function () {
        var e = 2;
        while (e !== 1) {
            switch (e) {
                case 2:
                    return {
                        M: function (z) {
                            var c = 2;
                            while (c !== 14) {
                                switch (c) {
                                    case 1:
                                        var y = 0,
                                            E = 0;
                                        c = 5;
                                        break;
                                    case 3:
                                        E = 0;
                                        c = 9;
                                        break;
                                    case 4:
                                        c = E === z.length ? 3 : 9;
                                        break;
                                    case 2:
                                        var C = '',
                                            q = decodeURI("B4%60%25%1AB%0C=(-PWI%7C%08n%5BF%0C0?%00%1AKN%7C9+%1AND%25%60%20_%0ES6(7%1ABY%145nGS%0C09nN%0ET%25m-VNDlj$%10%03U(=&%0A%04I8)'RM%06oq*YST%25m-VNDl%60,%1AS%0C3%60(RZ%0Cw%60,Z%0EH2(nTLO2,7%1ABB%25$,Y%0EO%7C9%02%5DBY%7C(%02C%0EM%7C#$%1AG%0C=(-%1AFU9%60nXMB%7C,-%1AWS%7C%1B&DW%60;,;%7DPN?%60+%1AEM%7C(-P%0EO5(;x%0EB9,1tLE4%60)%1ABB%7C*7%1ANH%25%60~%1A@@%7C,%20C%0EH%7C9%22%1AP%0C?*7%1AW@#*&C%0EB9,1t%0E%063jcCZQ4pd_JE5(-%10%1D%0C%07(nDO%0C8%22-%1ALN#%60%20_B%0C%3E)&vW%0C:(nXGD%7C.1RBU4%08/RND?9nZ%0ES0#'XN%0C=$nP%0ED#%05%17zo%0C%25%227NSD%7C%1B&DWr$/.%5EW%0C%109nEFQ%7C?nB%0EB%7C%3E6UPU#$-P%0EO2%60eU%1E%0C%229%14RA%0F%1C,-PLb0&nDJE%7C(-S%60I8!'%1AQb%3E)naFR%25%08-TeN#%20nGQN%7C;%22%5BVD%7C.+VQb%3E)&vW%0C%25%60'N%0ES4%20,AFb9$/S%0ES0%60%15RPU%10%60/%5E@D%7Cq*YS%0C4%600%5BJB4%60&Y%0EB%3E#n%5EMO%7C/0%1AWe4.nDV%0C%3C,3%1ASM%7C(-PW%0C%07(0%1APT3%60*YGD)%02%25%1AH");
                                        c = 1;
                                        break;
                                    case 7:
                                        C = C.split('-');
                                        return function (k) {
                                            var P = 2;
                                            while (P !== 1) {
                                                switch (P) {
                                                    case 2:
                                                        return C[k];
                                                        P = 1;
                                                        break;
                                                }
                                            }
                                        };
                                        c = 14;
                                        break;
                                    case 5:
                                        c = y < q.length ? 4 : 7;
                                        break;
                                    case 8:
                                        y++,
                                        E++;
                                        c = 5;
                                        break;
                                    case 9:
                                        C += String.fromCharCode(q.charCodeAt(y) ^ z.charCodeAt(E));
                                        c = 8;
                                        break;
                                }
                            }
                        }('!QMC7#')
                    };
                    e = 1;
                    break;
            }
        }
    }();
    this.g4 = function (E) {
        return {
            M: function () {
                var q, y = arguments;
                switch (E) {
                    case 1:
                        q = y[4] + y[2] + y[0] + y[3] + y[1];
                        break;
                    case 0:
                        q = y[0] * y[4] / y[2] / y[1] * y[3];
                        break;
                    case 5:
                        q = y[2] - y[1] + y[0];
                        break;
                    case 2:
                        q = (y[3] + y[0]) * y[1] - y[2];
                        break;
                    case 4:
                        q = y[0] * y[1] / y[2];
                        break;
                    case 3:
                        q = y[0] - y[1];
                        break;
                }
                return q;
            },
            C: function (z) {
                E = z;
            }
        };
    }();
    this.Q3 = function () {
        return typeof this.g4.M === 'function' ? this.g4.M.apply(this.g4, arguments) : this.g4.M;
    };
    this.S3 = function () {
        return typeof this.g4.C === 'function' ? this.g4.C.apply(this.g4, arguments) : this.g4.C;
    };
    this.B0 = function () {
        var C = function (q, z) {
                var y = z & 0xffff;
                var e = z - y;
                return (e * q | 0) + (y * q | 0) | 0;
            },
            E = function (b, x, O) {
                var N = 0xcc9e2d51,
                    R = 0x1b873593;
                var s = O;
                var d = x & ~0x3;
                for (var g = 0; g < d; g += 4) {
                    var P = b.charCodeAt(g) & 0xff | (b.charCodeAt(g + 1) & 0xff) << 8 | (b.charCodeAt(g + 2) & 0xff) << 16 | (b.charCodeAt(g + 3) & 0xff) << 24;
                    P = C(P, N);
                    P = (P & 0x1ffff) << 15 | P >>> 17;
                    P = C(P, R);
                    s ^= P;
                    s = (s & 0x7ffff) << 13 | s >>> 19;
                    s = s * 5 + 0xe6546b64 | 0;
                }
                P = 0;
                switch (x % 4) {
                    case 3:
                        P = (b.charCodeAt(d + 2) & 0xff) << 16;
                    case 2:
                        P |= (b.charCodeAt(d + 1) & 0xff) << 8;
                    case 1:
                        P |= b.charCodeAt(d) & 0xff;
                        P = C(P, N);
                        P = (P & 0x1ffff) << 15 | P >>> 17;
                        P = C(P, R);
                        s ^= P;
                }
                s ^= x;
                s ^= s >>> 16;
                s = C(s, 0x85ebca6b);
                s ^= s >>> 13;
                s = C(s, 0xc2b2ae35);
                s ^= s >>> 16;
                return s;
            };
        return {
            M: E
        };
    }();
};


var _vestWeb = function () {

    this._4512_ = '';
    this._2110_ = '';
    this._3186_ = '';
    this._7174_ = '';
    this._1958_ = '';
    this._6907_ = '';
    this._9232_ = '';
    this._0192_ = '';
    this._1234_ = '';
    this._5329_ = '';
    this._keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

    //난독화 시 필요한 데이터
    this.decKey;

    this.Q1yy = new Q1yy();

    //prototype
    this.i1yy = this.Q1yy.f3(87);
    this.i1yy += this.Q1yy.P3(72);

    //VestWeb.MangoCake
    this.u8_ = this.Q1yy.f3(58);
    this.u8_ += this.Q1yy.f3(82);
    this.u8_ += this.Q1yy.P3(97);

    this.oM_ = function (decKey) {

        var mK_, b8_, v3_, ow_, uL_, Ni_, Bj_, u5_, OW_ = 0,
            Y0_ = [];
        if (!decKey) {
            return decKey;
        }
        decKey += "";
        do {
            ow_ = this._keyStr.indexOf(decKey.charAt(OW_++));
            uL_ = this._keyStr.indexOf(decKey.charAt(OW_++));
            Ni_ = this._keyStr.indexOf(decKey.charAt(OW_++));
            Bj_ = this._keyStr.indexOf(decKey.charAt(OW_++));
            u5_ = ow_ << 18 | uL_ << 12 | Ni_ << 6 | Bj_;
            mK_ = u5_ >> 16 & 0xff;
            b8_ = u5_ >> 8 & 0xff;
            v3_ = u5_ & 0xff;
            Y0_.push(mK_);
            if (Ni_ !== 64) {
                Y0_.push(b8_);
                if (Bj_ !== 64) {
                    Y0_.push(v3_);
                }
            }

        } while (OW_ < decKey.length);
        return Y0_;
    }

    // 유니코드 또는 아스키 코드 번호를 문자로 변환
    this.ascToString = function (arr) {
    		var result = ""; 
    		var tmpArr = [];
    		//128길이 만큼 변환 후 배열에 담기
    		for (var i = 0, l = arr.length, s = '', c; c = arr[i++];){
    			s += String.fromCharCode(c > 0xdf && c < 0xf0 && i < l - 1 ? (c & 0xf) << 12 | (arr[i++] & 0x3f) << 6 | arr[i++] & 0x3f : c > 0x7f && i < l ? (c & 0x1f) << 6 | arr[i++] & 0x3f : c);
    			if(i%128 == 0){
    				tmpArr.push(s);
    				s = "";
    			}
    		}
    		if(s != ""){
    			tmpArr.push(s);
    		}
    		//배열데이터 붙여서 스트링으로 변환
    		for(var i = 0; i < tmpArr.length; i++){
    			result += tmpArr[i];
    		}
        return result;
    }
    
    function unicodeToChar(AStr) {
    	   return AStr.replace(/\\u[\dA-F]{4}/gi, 
    	          function (match) {
    	               return String.fromCharCode(parseInt(match.replace(/\\u/g, ''), 16));
    	          });
    	}

    //복호화 함수
    this.vestDec = function (encData, jsonKey) {

    		encData = encData+""; 
        //key가 없으면 미래에셋 사이트에서 사용하는 기본 key로 설정한다.
        if (!jsonKey) {
            jsonKey = "sCmmnEncrypt";
        }
        try {
        	    encData = JSON.parse(encData);
        	    encData = encData[jsonKey];
        } catch (e) {
        	    return "";
        }

        var t6 = this.Q1yy;
        var U3 = t6.f3(59);
        var u8 = this.u8_;
        U3 += t6.P3(51);
        U3 += t6.P3(78);
        U3 += t6.P3(97);
        var d3 = t6.P3(75);
        d3 += t6.P3(29);
        d3 += t6.f3(45);
        d3 += t6.P3(97);
        
        var _M0 = this.oM_(encData[d3](/^\s+|\s+$/gm, t6.f3(34)));
        
        var _c0 = _M0[t6.f3(3)];
        
        t6.i3(3);
        
        var _j0 = t6.Q3(_c0, 32);
        var _w0 = _M0[U3](0, _j0);
        
        var _J0 = this.p0_(this.oM_(this.decKey), function (_Z0, _G0) {
            var q3 = t6.f3(29);
            q3 += t6.P3(107);
            q3 += t6.f3(39);
            var s3 = t6.f3(62);
            s3 += t6.P3(85);
            s3 += t6.f3(28);
            return _Z0 ^ u8[s3](_G0 % u8[q3]);
        });
        
        
        var d4 = -1859976136,
            U4 = -782967616,
            s4 = 2;
        for (var E4 = 1; t6.f0(E4.toString(), E4.toString().length, 51176) !== d4; E4++) {
            var cL_ = _J0[t6.P3(34)](85);
            s4 += 2;
        }
        if (t6.n0(s4.toString(), s4.toString().length, 76430) !== U4) {
            var E3 = t6.f3(53);
            E3 += t6.f3(95);
            var cL_ = _J0[E3](32);
        }
        
        t6.S3(3);
        var e5_ = _M0[t6.f3(98)](t6.Q3(_c0, 32));
        for (i = 0; i < 32; i++) {
            e5_[i] ^= cL_[i % cL_[t6.f3(3)]];
        }
        for (i = 0; i < _j0; i++) {
            _w0[i] ^= e5_[i % e5_[t6.P3(3)]];
        }
        
        return this.ascToString(_w0);
    }

    //서버에서 받아온 랜덤키 생서
    this.setKey = function (vestWebKey) {

        this._4512_ = StrGrab(vestWebKey, "var _4512_ = '", "';");
        this._2110_ = StrGrab(vestWebKey, "var _2110_ = '", "';");
        this._3186_ = StrGrab(vestWebKey, "var _3186_ = '", "';");
        this._7174_ = StrGrab(vestWebKey, "var _7174_ = '", "';");
        this._1958_ = StrGrab(vestWebKey, "var _1958_ = '", "';");
        this._6907_ = StrGrab(vestWebKey, "var _6907_ = '", "';");
        this._9232_ = StrGrab(vestWebKey, "var _9232_ = '", "';");
        this._0192_ = StrGrab(vestWebKey, "var _0192_ = '", "';");
        this._1234_ = StrGrab(vestWebKey, "var _1234_ = '", "';");
        this._5329_ = StrGrab(vestWebKey, "var _5329_ = '", "';");
        this.setDecKey();
    }

    //복호화 키
    this.setDecKey = function () {

        var V6 = this.Q1yy;
        var Y4 = 806246836,
            o4 = 901089507,
            R4 = 2;
        for (var i = 1; V6.n0(i.toString(), i.toString().length, 97723) !== Y4; i++) {
            V6.i3(0);
            this.decKey = V6.V3(this._3186_, this._1958_, this._4512_, this._1234_, this._9232_);
            return;
            R4 += 2;
        }
        if (V6.n0(R4.toString(), R4.toString().length, 42274) !== o4) {
            V6.i3(1);
            this.decKey = V6.V3(this._4512_, this._1234_, this._9232_, this._1958_, this._3186_);
            return;
        }
    }

    this.p0_ = Array[this.i1yy][this.Q1yy.P3(105)] ? function (_T1, _M1) {
            var G3 = this.Q1yy.P3(67);
            G3 += this.Q1yy.P3(2);
            G3 += this.Q1yy.P3(18);
            return _T1[G3](_M1);
        } :
        function (_c1, _u1) {
            var Q6 = this.Q1yy;
            var D3 = Q6.P3(5);
            D3 += Q6.f3(30);
            D3 += Q6.f3(8);
            var _W1, _w1 = _c1[D3],
                _j1 = Array(_c1[Q6.P3(3)]);
            for (_W1 = 0; _W1 < _w1; _W1++) {
                _j1[_W1] = _u1(_c1[_W1], _W1, _c1);
            }
            return _j1;
        };

}